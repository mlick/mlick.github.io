---
title: 单一职责原则
date: 2023-01-11 19:49:01
categories:
- 设计模式原则
tags:
- 技术
---

## 描述

英文名为: Single Responsibility Principle
简称: SRP
简单定义: 解耦和增强内聚性
<!-- more -->



## 定义

指一个类或者模块应该有且只有一个改变的原因。如果一个类承担的职责过多,就等于把这些职责耦合在一起了。一个职责的变化可能会削弱或者抑制这个类完成其它职责的能力。这种耦合会导致脆弱的设计，当发生变化时，设计会遭受到意想不到的破坏。而如果想要避免这种现象的发生，就要尽可能的遵守单一职责原则。此原则的核心就是解耦和增强内聚性。

## 意义

一个类不能做太多的东西。在软件系统中，一个类(一个模块、或者一个方法)承担的职责越多，那么其被复用的可能性就会越低。一个很典型的例子就是万能类。其实可以说一句大实话：任何一个常规的MVC项目，在极端的情况下，可以用一个类(甚至一个方法)完成所有的功能。但是这样做就会严重耦合，甚至牵一发动全身。一个类承(一个模块、或者一个方法)担的职责过多，就相当于将这些职责耦合在一起，当其中一个职责变化时，可能会影响其他职责的运作，因此要将这些职责进行分离，将不同的职责封装在不同的类中，即将不同的变化原因封装在不同的类中，如果多个职责总是同时发生改变则可将它们封装在同一类中。

不过说实话，其实有的时候很难去衡量一个类的职责，主要是很难确定职责的粒度。这一点不仅仅体现在一个类或者一个模块中，也体现在采用微服务的分布式系统中。这也就是为什么我们在实施微服务拆分的时候经常会撕逼："这个功能不应该发在A服务中，它不做这个领域的东西，应该放在B服务中"诸如此类的争论。存在争论是合理的，不过最好不要不了了之，而应该按照领域定义好每个服务的职责(职责的粒度最好找业务和架构专家咨询)，得出相对合理的职责分配。



## 如何实现

那么如果实现对扩展开放，对修改关闭呢？ 

要实现对扩展开放，对修改关闭，即遵循开闭原则，需要对系统进行抽象话设计，抽象可以基于抽象类或者接口。一般来说需要做大几点:

1. 通过接口或者抽象类约束扩展，对扩展进行边界限定，不允许出现接口或抽象类中不存在的public方法，也就是扩展必须添加具体实现而不是改变具体的方法。
2. 参数类型、引用对象尽量使用接口或者抽象类，而不是实现类，这样就能尽量保证抽象层是稳定的。
3. 一般抽象模块设计完成（例如接口的方法已经敲定），不如许修改接口或者抽象方法的定义。



## 代码示例









## 参考示例

https://cloud.tencent.com/developer/article/1650116

